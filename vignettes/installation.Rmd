---
title: "Installation"
author: "Will Lowe"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Installation}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

## Getting Java

You want to install the 'JDK' for the latest version of the Java language.  As of 9 May 2015 the latest version of Java is called `Java SE 8u45`.  There are three steps:

 1. Press the big square button with a stylized coffee cup and the words 'Java' and 'Download' on [this page](http://www.oracle.com/technetwork/java/javase/downloads/index.html).

 2. You're now on a page entitled 'Java SE Development Kit 8 Downloads'.  Press the radio button marked 'Accept License Agreement' and click on the link associated with your operating system.

 3. Now it's time to persuade R to talk to Java.  You can do this by

    install.packages('rJava')

If you're incredibly lucky, you're done.  Try typing

    library(rJava)

and if that works without complaint, check the version of Java that R sees.

    .jinit()
    .jnew("java/lang/System")$getProperty("java.specification.version")

It should say "1.8".  If it does not, you need to reconfigure some things before
carrying on.  Have a look below for the gory details.

## Reconfigure All The Things

### Mac people

If you are on a Mac you were probably prompted by a dialog to install Java.  Following these instruction, you'll land at an Apple web page and get something to install.  This is in fact the wrong version of Java (1.6 and no longer supported), but you should install it anyway to stop that dialog coming back.  In principle there's no problem having various Java versions around.

Now that you've done that, we'll reconfigure R to recognise the new version you've put in first. In a Terminal window type

    touch ~/.bash_profile
    open -e ~/.bash_profile

and drop the following lines in the file that just opened up in TextEdit

    export JAVA_HOME=`/usr/libexec/java_home -v 1.8`
    export PATH=$JAVA_HOME/bin:$PATH

Save that file, open up a fresh Terminal window, and type

    sudo R CMD javareconf

(this will prompt you for your login password first). Now back in R type

    install.packages('rJava', type='source')

This will recompile the package to take into account the presence of a new version of Java.

Or it should.  If it doesn't you might want to read [this](http://andrewgoldstone.com/blog/2015/02/03/rjava/), blogged under the very appropriate tag 'kludgetastic'.  At some point Java, rJava, and RStudio probably play nicely together again.  I look forward to it.

### Windows people

In the unlikely event you need to look here, I can't help.

### Linux people

Have a look at the 'Mac People' instructions above.  They should work for you too, particularly if you use R from the a Terminal window (just type R), rather than in one of its GUIs.

